import { Document, Page, Text, View, StyleSheet, Image } from '@react-pdf/renderer'

const styles = StyleSheet.create({
  page: {
    flexDirection: 'column',
    backgroundColor: '#ffffff',
    padding: 30,
    fontFamily: 'Helvetica',
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 30,
    borderBottom: '2 solid #4F46E5',
    paddingBottom: 15,
  },
  logo: {
    width: 120,
    height: 40,
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    color: '#4F46E5',
    marginBottom: 20,
  },
  section: {
    marginBottom: 15,
  },
  sectionTitle: {
    fontSize: 14,
    fontWeight: 'bold',
    color: '#374151',
    marginBottom: 5,
  },
  field: {
    flexDirection: 'row',
    marginBottom: 8,
  },
  label: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#6B7280',
    width: 100,
  },
  value: {
    fontSize: 12,
    color: '#111827',
    flex: 1,
  },
  footer: {
    marginTop: 30,
    paddingTop: 15,
    borderTop: '1 solid #E5E7EB',
    fontSize: 10,
    color: '#6B7280',
    textAlign: 'center',
  },
})

export const generateBookingPDF = (formData, seatData) => {
  const currentDate = new Date().toLocaleString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
  })

  return (
    <Document>
      <Page size="A4" style={styles.page}>
        <View style={styles.header}>
          <Image src="/logo.png" style={styles.logo} />
          <Text style={styles.sectionTitle}>Generated: {currentDate}</Text>
        </View>

        <Text style={styles.title}>Patient Appointment Request</Text>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Patient Information</Text>
          <View style={styles.field}>
            <Text style={styles.label}>Name:</Text>
            <Text style={styles.value}>{formData.name}</Text>
          </View>
          <View style={styles.field}>
            <Text style={styles.label}>Date of Birth:</Text>
            <Text style={styles.value}>{formData.dob}</Text>
          </View>
          <View style={styles.field}>
            <Text style={styles.label}>Email:</Text>
            <Text style={styles.value}>{formData.email}</Text>
          </View>
          <View style={styles.field}>
            <Text style={styles.label}>Phone:</Text>
            <Text style={styles.value}>{formData.phone}</Text>
          </View>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Insurance Information</Text>
          <View style={styles.field}>
            <Text style={styles.label}>Insurer:</Text>
            <Text style={styles.value}>{formData.insurer}</Text>
          </View>
          <View style={styles.field}>
            <Text style={styles.label}>Policy:</Text>
            <Text style={styles.value}>{formData.policy}</Text>
          </View>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Appointment Details</Text>
          <View style={styles.field}>
            <Text style={styles.label}>Urgency:</Text>
            <Text style={styles.value}>{formData.urgency}</Text>
          </View>
          <View style={styles.field}>
            <Text style={styles.label}>Summary:</Text>
            <Text style={styles.value}>{formData.summary}</Text>
          </View>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Practice Information</Text>
          <View style={styles.field}>
            <Text style={styles.label}>Doctor:</Text>
            <Text style={styles.value}>{seatData?.doctor_name || 'N/A'}</Text>
          </View>
          <View style={styles.field}>
            <Text style={styles.label}>Seat ID:</Text>
            <Text style={styles.value}>{formData.seat_id}</Text>
          </View>
        </View>

        <View style={styles.footer}>
          <Text>This booking request was generated by Regents Care</Text>
          <Text>Timestamp: {currentDate}</Text>
        </View>
      </Page>
    </Document>
  )
}
